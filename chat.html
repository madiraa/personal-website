<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chat with Madi's AI</title>
  <link rel="stylesheet" href="style.css?v=1.1">
  <style>
    .chat-container{max-width:800px;margin:2rem auto;background:#000;padding:1.5rem;border:1px solid #232336;border-radius:6px;font-family:'Fira Mono','Consolas',monospace;}
    .chat-log{height:400px;overflow-y:auto;background:#101014;padding:1rem;border-radius:4px;color:#e6e6e6;}
    .chat-message{margin-bottom:1rem;}
    .chat-message.user{color:#00ffe7;}
    .chat-message.ai{color:#a259f7;}
    .chat-input-area{display:flex;margin-top:1rem;}
    .chat-input-area input{flex:1;background:#101014;color:#e6e6e6;border:none;padding:0.8rem;font-family:inherit;}
    .chat-input-area button{background:#232336;color:#00ffe7;border:none;padding:0.8rem 1.3rem;font-weight:bold;cursor:pointer;}
    .chat-input-area button:hover{background:#2e2e48;}
  </style>
</head>
<body>
  <nav class="topnav">
    <ul>
      <li><a href="about.html" onclick="if(!(event.ctrlKey||event.metaKey||event.button===1)){showMatrixLoader();}">About</a></li>
      <li><a href="osint.html" onclick="if(!(event.ctrlKey||event.metaKey||event.button===1)){showMatrixLoader();}">OSINT</a></li>
      <li><a href="poli-sci.html" onclick="if(!(event.ctrlKey||event.metaKey||event.button===1)){showMatrixLoader();}">Political Science</a></li>
      <li><a href="organizing.html" onclick="if(!(event.ctrlKey||event.metaKey||event.button===1)){showMatrixLoader();}">Organizing</a></li>
      <li><a href="elected.html" onclick="if(!(event.ctrlKey||event.metaKey||event.button===1)){showMatrixLoader();}">Elected</a></li>
      <li><a href="campaigning.html" onclick="if(!(event.ctrlKey||event.metaKey||event.button===1)){showMatrixLoader();}">Campaigning</a></li>
      <li><a href="life.html" onclick="if(!(event.ctrlKey||event.metaKey||event.button===1)){showMatrixLoader();}">Life</a></li>
      <li><a href="chat.html" onclick="if(!(event.ctrlKey||event.metaKey||event.button===1)){showMatrixLoader();}" class="active">Chat</a></li>
      <li><a href="contact.html" onclick="if(!(event.ctrlKey||event.metaKey||event.button===1)){showMatrixLoader();}">Contact</a></li>
    </ul>
  </nav>
  <main>
    <section class="chat-container">
        <h2 class="glitch" data-text="Talk to AI-Madi">Talk to AI-Madi</h2>
        <div class="chat-log" id="chat-log">
          <div class="chat-message ai">Hello hacker-friend ðŸ‘¾ â€” ask me anything about Madison!</div>
        </div>
        <div class="chat-input-area">
          <input type="text" id="chat-input" placeholder="e.g. What is Madi passionate about?">
          <button id="chat-send">Send</button>
        </div>
        <p style="font-size:0.8em;color:#777;margin-top:1rem;">Tip: your API key stays in your browser (localStorage). No server stores it.</p>
    </section>
  </main>
  <script src="script.js"></script>
  <script>
    const logEl=document.getElementById('chat-log');
    const inputEl=document.getElementById('chat-input');
    const sendBtn=document.getElementById('chat-send');
    let OPENAI_API_KEY=localStorage.getItem('OPENAI_API_KEY')||'';
    if(!OPENAI_API_KEY){OPENAI_API_KEY=prompt('Enter your OpenAI API key to enable live answers (leave blank for demo):');if(OPENAI_API_KEY)localStorage.setItem('OPENAI_API_KEY',OPENAI_API_KEY);}
    const systemPrompt="You are ChatMadi, an AI assistant living on Madison Raasch's personal website. Answer questions about Madison based ONLY on public information from this site and her professional profile. Keep it concise, friendly, and a bit hacker-humorous. If you don't know, say you don't know.";
    let conversation=[{role:'system',content:systemPrompt}];
    function addMessage(role,text){const msg=document.createElement('div');msg.className='chat-message '+(role==='user'?'user':'ai');msg.textContent=text;logEl.appendChild(msg);logEl.scrollTop=logEl.scrollHeight;}
    async function sendMessage(){const userText=inputEl.value.trim();if(!userText)return;addMessage('user',userText);inputEl.value='';if(!OPENAI_API_KEY){const fallback=['Model confidence: 99.2% that Madi will automate this task.','Fun fact: Madi once quantified activism in R just for laughs.','Error 418: I\'m a teapot, but also your virtual guide to all things Madison.'][Math.floor(Math.random()*3)];addMessage('ai',fallback);return;}addMessage('ai','â³ â€¦thinking');conversation.push({role:'user',content:userText});try{const res=await fetch('https://api.openai.com/v1/chat/completions',{method:'POST',headers:{'Content-Type':'application/json','Authorization':'Bearer '+OPENAI_API_KEY},body:JSON.stringify({model:'gpt-3.5-turbo',messages:conversation,temperature:0.7})});const data=await res.json();const reply=data.choices?.[0]?.message?.content?.trim()||'Hmm, network gremlins. Try again.';addMessage('ai',reply);conversation.push({role:'assistant',content:reply});}catch(err){addMessage('ai','âš ï¸ Error: '+err.message);} }
    sendBtn.addEventListener('click',sendMessage);inputEl.addEventListener('keydown',e=>{if(e.key==='Enter'){sendMessage();}});
  </script>
</body>
</html> 